# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Permission {
  module: String!
  permission: PermissionType!
  rolePermissions: [RolePermission!]
  createdAt: DateTime!
  updatedAt: DateTime!
}

enum PermissionType {
  CREATE
  READ
  UPDATE
  DELETE
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type RolePermission {
  id: ID!
  roleId: ID!
  permissionId: ID!
  role: Role!
  permission: Permission!
}

type Role {
  id: ID!
  title: String!
  description: String!
  rolePermissions: [RolePermission!]
  users: [User!]
  createdAt: DateTime!
  updatedAt: DateTime!
}

type User {
  id: ID!
  fullName: String!
  email: String!
  profilePictureUrl: String
  isActive: Boolean!
  role: Role!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type PaginatedUsers {
  items: [User!]!
  total: Int!
  limit: Int!
  offset: Int!
}

type AuthResponse {
  accessToken: String!
  refreshToken: String!
  user: User!
}

type SystemLog {
  id: Int!
  userId: String!
  user: User!
  action: ActivityAction!
  description: String!
  logType: SystemLogType!
  resourceType: String
  resourceId: String
  ipAddress: String
  userAgent: String
  device: String
  browser: String
  os: String
  location: String
  metadata: String
  createdAt: DateTime!
}

enum ActivityAction {
  LOGIN
  LOGOUT
  CREATE
  UPDATE
  DELETE
  CHANGE_PASSWORD
  RESET_PASSWORD
  REFRESH_TOKEN
}

enum SystemLogType {
  ACTIVITY
  AUDIT
}

type PaginatedSystemLogs {
  items: [SystemLog!]!
  total: Int!
  limit: Int!
  offset: Int!
}

type SMTPResponseDto {
  smtpHost: String!
  smtpPort: Int!
  smtpSecure: Boolean!
  smtpUsername: String
  smtpPassword: String
  smtpFromEmail: String!
  smtpFromName: String!
  smtpEnabled: Boolean!
}

type UploadResponse {
  key: String!
  size: Int!
  mimeType: String!
  filename: String!
}

type Query {
  getUsers(search: String, limit: Int = 20, offset: Int = 0, orderDirection: SortDirection, isActive: Boolean, orderBy: UserOrderBy, roleId: String): PaginatedUsers!
  getUserById(id: String!): User!
  me: User!
  getAllRoles: [Role!]!
  getRoleById(id: String!): Role!
  getAllPermissions: [Permission!]!
  getSystemLogs(search: String, limit: Int = 20, offset: Int = 0, orderDirection: SortDirection, userId: String, action: ActivityAction, logType: SystemLogType, startDate: String, endDate: String, orderBy: SystemLogOrderBy): PaginatedSystemLogs!
  getSMTPSettings: SMTPResponseDto!
}

enum SortDirection {
  ASC
  DESC
}

enum UserOrderBy {
  CREATED_AT
  FULL_NAME
  EMAIL
}

enum SystemLogOrderBy {
  CREATED_AT
}

type Mutation {
  createUser(createUserInput: CreateUserInput!): User!
  updateUser(updateUserInput: UpdateUserInput!): User!
  removeUser(id: String!): User!
  login(loginInput: LoginInput!): AuthResponse!
  refreshTokens(userId: String!, refreshToken: String!): AuthResponse!
  logout: Boolean!
  createRole(createRoleInput: CreateRoleInput!): Role!
  updateRole(updateRoleInput: UpdateRoleInput!): Role!
  removeRole(id: String!): Boolean!
  removeAllSystemLogs: Boolean!
  createSMTPSettings(createSMTPSettingInput: CreateSMTPSettingDto!): SMTPResponseDto!
  uploadFile(uploadFileInput: UploadFileInput!): UploadResponse!
  deleteFile(key: String!): Boolean!
}

input CreateUserInput {
  fullName: String!
  email: String!
  profilePictureUrl: String
  password: String!
  roleId: String!
}

input UpdateUserInput {
  fullName: String
  email: String
  profilePictureUrl: String
  password: String
  roleId: String
  id: String!
}

input LoginInput {
  email: String!
  password: String!
}

input CreateRoleInput {
  title: String!
  description: String!
  permissionIds: [String!]!
}

input UpdateRoleInput {
  title: String
  description: String
  permissionIds: [String!]
  id: String!
}

input CreateSMTPSettingDto {
  smtpHost: String!
  smtpPort: Int!
  smtpSecure: Boolean!
  smtpUsername: String!
  smtpPassword: String!
  smtpFromEmail: String!
  smtpFromName: String!
  smtpEnabled: Boolean!
}

input UploadFileInput {
  fileBase64: String!
  mimeType: String!
  folder: String!
}